(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(t,e){},102:function(t,e){},135:function(t,e){},136:function(t,e){},182:function(t,e){},183:function(t,e){},184:function(t,e){},185:function(t,e,n){},186:function(t,e,n){"use strict";n.r(e);var a=n(16),i=n(17),o=n(19),s=n(18),c=n(20),r=n(3),h=n.n(r),l=n(88),u=n(27),d=n.n(u),p=n(49),f=n(6),v=n(28),b=function(t){function e(t){var n;return Object(a.a)(this,e),(n=Object(o.a)(this,Object(s.a)(e).call(this,t))).handleOnMouseDown=n.handleOnMouseDown.bind(Object(f.a)(Object(f.a)(n))),n.handleOnTouchStart=n.handleOnTouchStart.bind(Object(f.a)(Object(f.a)(n))),n.handleOnMouseMove=n.handleOnMouseMove.bind(Object(f.a)(Object(f.a)(n))),n.handleOnTouchMove=n.handleOnTouchMove.bind(Object(f.a)(Object(f.a)(n))),n.handleonMouseUp=n.handleonMouseUp.bind(Object(f.a)(Object(f.a)(n))),n}return Object(c.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){this.ctx=this.canvas.getContext("2d")}},{key:"componentWillReceiveProps",value:function(t){t.clear&&this.resetCanvas()}},{key:"resetCanvas",value:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}},{key:"handleOnTouchStart",value:function(t){var e=this.canvas.getBoundingClientRect();this.ctx.beginPath(),this.lastX=t.targetTouches[0].pageX-e.left,this.lastY=t.targetTouches[0].pageY-e.top,this.drawing=!0}},{key:"handleOnMouseDown",value:function(t){var e=this.canvas.getBoundingClientRect();this.ctx.beginPath(),this.lastX=t.clientX-e.left,this.lastY=t.clientY-e.top,this.drawing=!0}},{key:"handleOnTouchMove",value:function(t){if(this.drawing){var e=this.canvas.getBoundingClientRect(),n=this.lastX,a=this.lastY,i=t.targetTouches[0].pageX-e.left,o=t.targetTouches[0].pageY-e.top;this.draw(n,a,i,o),this.lastX=i,this.lastY=o}}},{key:"handleOnMouseMove",value:function(t){if(this.drawing){var e=this.canvas.getBoundingClientRect(),n=this.lastX,a=this.lastY,i=t.clientX-e.left,o=t.clientY-e.top;this.draw(n,a,i,o),this.lastX=i,this.lastY=o}}},{key:"handleonMouseUp",value:function(){this.ctx.drawImage(this.canvas,0,0,28,28),this.drawing=!1,"function"===typeof this.props.onGetImage&&this.props.onGetImage(this.ctx.getImageData(0,0,28,28))}},{key:"draw",value:function(t,e,n,a){var i=this.ctx;i.strokeStyle=this.props.brushColor,i.lineWidth=this.props.lineWidth,this.ctx=i,this.ctx.moveTo(t,e),this.ctx.lineTo(n,a),this.ctx.stroke()}},{key:"render",value:function(){var t=this;return h.a.createElement("canvas",{ref:function(e){t.canvas=e},width:this.props.width,style:{cursor:"crosshair",border:"1px black solid"},height:this.props.height,onMouseDown:this.handleOnMouseDown,onTouchStart:this.handleOnTouchStart,onMouseMove:this.handleOnMouseMove,onTouchMove:this.handleOnTouchMove,onMouseUp:this.handleonMouseUp,onTouchEnd:this.handleonMouseUp})}}]),e}(r.Component),O=function(t){function e(t){var n;return Object(a.a)(this,e),(n=Object(o.a)(this,Object(s.a)(e).call(this,t))).state={},n.predict=n.predict.bind(Object(f.a)(Object(f.a)(n))),n.clear=n.clear.bind(Object(f.a)(Object(f.a)(n))),n.loadModel(),n}return Object(c.a)(e,t),Object(i.a)(e,[{key:"loadModel",value:function(){var t=Object(p.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.c("./assets/model.json");case 2:this.model=t.sent;case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"predict",value:function(){var t=Object(p.a)(d.a.mark(function t(e){var n=this;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.model){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,v.d(function(){var t,a=0,i=v.a.fromPixels(e,1);i=i.reshape([1,28,28,1]),i=v.b(i,"float32");var o=n.model.predict(i),s=Array.from(o.dataSync());s.forEach(function(e,n){e>a&&(a=e,t=n)}),n.setState({number:t,predictions:s,clear:!1}),"function"===typeof n.props.onPredict&&n.props.onPredict(t,s)});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({clear:!0}),"function"===typeof this.props.onClear&&this.props.onClear()}},{key:"render",value:function(){return h.a.createElement("div",null,h.a.createElement("h5",null,this.props.title||"Draw a number (0-9) here:"),h.a.createElement("div",null,h.a.createElement(b,{brushColor:"grey",clear:this.state.clear,height:this.props.height||400,lineWidth:25,onGetImage:this.predict,width:this.props.width||400})),h.a.createElement("button",{onClick:this.clear},this.props.buttonText||"Clear"),this.props.children?this.props.children(this.state.number,this.state.predictions):null)}}]),e}(r.Component),g=(n(185),function(t){function e(){return Object(a.a)(this,e),Object(o.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(c.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){return h.a.createElement("div",{style:{textAlign:"center"}},h.a.createElement("h4",null,"Using a trained MNIST Keras model, with Tensorflow.js and React.js"),h.a.createElement(O,{width:400,height:400},function(t,e){return h.a.createElement(h.a.Fragment,null,h.a.createElement("h4",null,"Predicted number:"),h.a.createElement("h2",null,t))}))}}]),e}(r.Component));Object(l.render)(h.a.createElement(g,null),document.getElementById("root"))},89:function(t,e,n){t.exports=n(186)},99:function(t,e){}},[[89,1,2]]]);
//# sourceMappingURL=main.3d7bdc5b.chunk.js.map